<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpine js Crash course</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/sort@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>


    <script src="index.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style type="text/tailwindcss" lang="postcss">
        h1 {
            @apply font-medium text-blue-400 m-2;
        }
        .btn3 {
            @apply  px-4 py-2 m-4 text-sm font-medium mt-8 text-blue-900 bg-blue-100 rounded-md cursor-pointer hover:bg-blue-400
        }
        .sdk {
            @apply cursor-pointer hover:bg-blue-100 rounded-md;
        }
        th {
            @apply border border-gray-300;
        }
    </style>
</head>

<body>
    <form x-data="signupForm">
        <h1 class="font-medium text-blue-400 m-2 ">Ninja SignUp</h1>
        <button class="btn3" type="button" @click="defaultUsername()">click</button>
        <button class="btn3" type="button" @mouseleave="console.log('mouseleave')">mouseleave</button>
        <button class="btn3" type="button" @dbclick="console.log('Click')">dblclick</button>

        <br>
        <input class="form-control px-4 m-4 border-2" x-model="username" maxlength="15" placeholder="nom utilisateur"
            type="text" @keyup="console.log('Click')" />

        <span :class="{'warning': username.length>10}">
            <span x-text="15 - username.length"></span> Caract√®res restants
        </span>

    </form>

    <div x-sort x-data="{ valeurs:  [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16] }" class="sodoko rounded-md">
        <template x-for="nbre in valeurs">
            <!-- <p x-text="nbre"></p> -->
            <div class="sdk box" x-data='objbox(nbre, true)' x-sort:item x-text="valeur" x-bind="trigger"></div>
        </template>
    </div>
    <div>
        <form x-data="{ email: '', name:'' }" aria-label="Register">
            <div id="email_field" @change="console.log('email change')">
                <label for="email">Email:</label>
                <input type="email" name="email" id="email" x-model="email">
            </div>
            <div @change="console.log('name or ville change')">
                <label for="name">Name:</label><input name="name" id="name">
                <label for="ville">Ville:</label><input name="ville" id="ville">
            </div>
            <button>Submit</button>
        </form>
    </div>
    <div x-data style=" width: 680px; margin: 8px;">
        <table class="border-separate border-spacing-2 border-collapse border border-gray-400" x-data="{
                    ht:0.00, tva:0.00, ttc:0.00,
                    updateTotaux(oldmt, newmt) {
                        console.log(oldmt, newmt);
                        this.ttc=this.ttc-oldmt+newmt; 
                        this.tva=this.ttc/6; 
                        this.ht=this.ttc-this.tva; 
                    }
            }">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Article</th>
                    <th>Qte</th>
                    <th>PU</th>
                    <th>Montant</th>
                </tr>
                <tr>
                    <td colspan="5">
                        <hr><br>
                    </td>
                </tr>
            </thead>
            <tbody x-sort class="mb-10">
                <template x-for="nbre in 6">
                    <tr x-sort:item class="sdk" @change="updateTotaux(oldMontant, montant)"
                        x-data="objline('Article________________________________________'+nbre,0,nbre*1000*1.53651)">
                        <td class="text-right p-2" x-text='nbre'></td>
                        <td class="border-separate border-spacing-2"><input type="text" class="w-80 ml-2"
                                x-model="article"></td>
                        <td><input type="text " class="p-2 w-15 text-right " x-model="quantite" @click="incrementQte">
                        </td>
                        <td><input type="text" class="text-right p-2 w-20" x-model="prix_u" @click="incrementPu"></td>
                        <td class="p-2 w-30 text-right" x-text="montant"></td>
                    </tr>
                </template>
            </tbody>
            <tfoot class=" mb-4">
                <tr>
                    <td colspan="5">
                        <br>
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td class="text-right" colspan="4">Total TTC:</td>
                    <td class="px-2 text-right" x-text="ttc"></td>
                </tr>
                <tr>
                    <td class="text-right" colspan="4">TVA 20%:</td>
                    <td class="px-2 text-right" x-text="tva"></td>
                </tr>
                <tr>
                    <td class="text-right" colspan="4">Total HT:</td>
                    <td class="px-2 text-right" x-text="ht"></td>
                </tr>
            </tfoot>

    </div>
</body>

</html>